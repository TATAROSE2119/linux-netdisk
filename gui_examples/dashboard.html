<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç½‘ç›˜ç³»ç»Ÿ - æ–‡ä»¶ç®¡ç†</title>
    <link rel="stylesheet" href="css/dashboard.css">
</head>
<body>
    <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
    <nav class="navbar">
        <div class="navbar-left">
            <div class="logo">â˜ï¸</div>
            <div class="navbar-title">ç½‘ç›˜ç³»ç»Ÿ</div>
        </div>
        <div class="navbar-right">
            <div class="user-info">
                <div class="user-avatar" id="userAvatar">ğŸ‘¤</div>
                <div class="user-name" id="userName">ç”¨æˆ·</div>
            </div>
            <button class="logout-btn" onclick="logout()">
                ğŸšª é€€å‡ºç™»å½•
            </button>
        </div>
    </nav>

    <div class="container">
        <!-- å·¥å…·æ  -->
        <div class="toolbar">
            <button class="btn btn-success" onclick="uploadFile()" disabled id="uploadBtn">
                ğŸ“¤ ä¸Šä¼ æ–‡ä»¶
            </button>
            <button class="btn btn-success" onclick="batchUpload()" disabled id="batchUploadBtn">
                ğŸ“¤ æ‰¹é‡ä¸Šä¼ 
            </button>
            <button class="btn btn-primary" onclick="downloadFile()" disabled id="downloadBtn">
                ğŸ“¥ ä¸‹è½½æ–‡ä»¶
            </button>
            <button class="btn btn-success" onclick="downloadSelected()" disabled id="batchDownloadBtn">
                ğŸ“¦ æ‰¹é‡ä¸‹è½½
            </button>
            <button class="btn btn-warning" onclick="renameItem()" disabled id="renameBtn">
                âœï¸ é‡å‘½å
            </button>
            <button class="btn btn-danger" onclick="deleteItem()" disabled id="deleteBtn">
                ğŸ—‘ï¸ åˆ é™¤
            </button>
            <button class="btn btn-info" onclick="createFolder()" disabled id="createFolderBtn">
                ğŸ“ æ–°å»ºæ–‡ä»¶å¤¹
            </button>
            <button class="btn btn-info" onclick="refreshList()" disabled id="refreshBtn">
                ğŸ”„ åˆ·æ–°åˆ—è¡¨
            </button>
            <button class="btn btn-info" onclick="selectAll()" disabled id="selectAllBtn">
                â˜‘ï¸ å…¨é€‰
            </button>
            <button class="btn btn-info" onclick="clearSelection()" disabled id="clearSelectionBtn">
                âŒ å–æ¶ˆé€‰æ‹©
            </button>
        </div>

        <!-- å¯¼èˆªåŒºåŸŸ -->
        <div class="navigation">
            <button class="btn btn-info" onclick="goBack()" disabled id="backBtn">
                â¬…ï¸ è¿”å›ä¸Šçº§
            </button>
            <span style="font-weight: bold;">ğŸ“ å½“å‰ä½ç½®:</span>
            <span id="currentPathDisplay" style="font-family: monospace; background: #f8f9fa; padding: 5px 10px; border-radius: 3px;">/</span>
        </div>

        <!-- ä¸Šä¼ åŒºåŸŸ -->
        <div class="upload-area" id="uploadArea">
            <h3>ğŸ“ æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„ä¸Šä¼ </h3>
            <p>æˆ–ç‚¹å‡»ä¸Šä¼ æŒ‰é’®é€‰æ‹©æ–‡ä»¶</p>
            <p style="color: #6c757d; font-size: 14px;">å°†ä¸Šä¼ åˆ°: <span id="uploadPathDisplay">/</span></p>
        </div>
        
        <!-- æ–‡ä»¶åˆ—è¡¨ -->
        <div class="file-list-container">
            <table class="file-list" id="fileList">
                <thead>
                    <tr>
                        <th>â˜‘ï¸ é€‰æ‹©</th>
                        <th>ğŸ“„ åç§°</th>
                        <th>ğŸ“‚ ç±»å‹</th>
                        <th>ğŸ“Š å¤§å°</th>
                        <th>ğŸ“… ä¿®æ”¹æ—¶é—´</th>
                        <th>âš™ï¸ æ“ä½œ</th>
                    </tr>
                </thead>
                <tbody id="fileTableBody">
                    <!-- æ–‡ä»¶åˆ—è¡¨å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
                </tbody>
            </table>
        </div>

        <!-- çŠ¶æ€æ  -->
        <div class="status-bar">
            <span id="statusText">å°±ç»ª</span>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </div>
        
        <!-- æ‰¹é‡ä¸Šä¼ é˜Ÿåˆ—æ˜¾ç¤º -->
        <div id="uploadQueueContainer" style="display: none; margin: 20px 0; padding: 15px; background: white; border-radius: 10px; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);">
            <h4 style="margin-top: 0;">ğŸ“¤ ä¸Šä¼ é˜Ÿåˆ—</h4>
            <div id="uploadQueue"></div>
            <div style="margin-top: 10px;">
                <button class="btn btn-danger" onclick="clearUploadQueue()" id="clearQueueBtn">ğŸ—‘ï¸ æ¸…ç©ºé˜Ÿåˆ—</button>
                <button class="btn btn-warning" onclick="pauseUpload()" id="pauseBtn" style="display: none;">â¸ï¸ æš‚åœ</button>
                <button class="btn btn-success" onclick="resumeUpload()" id="resumeBtn" style="display: none;">â–¶ï¸ ç»§ç»­</button>
                <span id="queueStatus" style="margin-left: 15px; font-weight: bold;"></span>
            </div>
        </div>
    </div>

    <!-- å¼•å…¥JavaScriptæ¨¡å— -->
    <script src="js/ui-utils.js"></script>
    <script src="js/auth-manager.js"></script>
    <script src="js/file-manager.js"></script>
    <script src="js/upload-manager.js"></script>
    <script src="js/download-manager.js"></script>
    
    <script>
        // å…¨å±€å‡½æ•°ç»‘å®šï¼ˆç”¨äºHTML onclickäº‹ä»¶ï¼‰
        function uploadFile() { uploadManager.uploadFile(); }
        function batchUpload() { uploadManager.batchUpload(); }
        function downloadFile() { downloadManager.downloadFile(); }
        function downloadSelected() { downloadManager.downloadSelected(); }
        function renameItem() { fileManager.renameItem(); }
        function deleteItem() { fileManager.deleteItem(); }
        function createFolder() { fileManager.createFolder(); }
        function refreshList() { fileManager.refreshList(); }
        function selectAll() { fileManager.selectAll(); }
        function clearSelection() { fileManager.clearSelection(); }
        function goBack() { fileManager.goBack(); }
        function logout() { authManager.logout(); }
        
        // æ‰¹é‡ä¸Šä¼ é˜Ÿåˆ—ç®¡ç†
        function clearUploadQueue() { uploadManager.clearUploadQueue(); }
        function pauseUpload() { uploadManager.pauseUpload(); }
        function resumeUpload() { uploadManager.resumeUpload(); }
    </script>
</body>
</html>
