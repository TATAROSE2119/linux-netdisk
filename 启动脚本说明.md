# 🚀 网盘启动脚本使用说明

## 📋 脚本概览

| 脚本名称 | 功能描述 | 使用场景 |
|---------|---------|---------|
| `start_all_macos.sh` | 一键启动完整版 | 开发调试，需要详细日志 |
| `quick_start.sh` | 快速启动简化版 | 日常使用，快速启动 |
| `stop_all_macos.sh` | 停止所有服务 | 清理进程，停止服务 |
| `start_server_macos.sh` | 仅启动C服务器 | 只需要后端服务 |
| `start_client_macos.sh` | 仅启动命令行客户端 | 使用命令行界面 |
| `test_deployment_macos.sh` | 部署测试 | 检查环境配置 |

## 🎯 推荐使用方式

### 🥇 日常使用（推荐）
```bash
# 快速启动（后台运行）
./quick_start.sh

# 使用完毕后停止
./stop_all_macos.sh
```

### 🥈 开发调试
```bash
# 完整启动（前台运行，显示详细日志）
./start_all_macos.sh

# 按 Ctrl+C 停止
```

### 🥉 分别启动
```bash
# 1. 启动C服务器
./start_server_macos.sh

# 2. 启动Web界面（新终端）
cd gui_examples && ./start_server_macos.sh

# 3. 启动命令行客户端（新终端）
./start_client_macos.sh
```

## 📖 详细说明

### `start_all_macos.sh` - 完整版一键启动

**特点：**
- ✅ 自动检查依赖
- ✅ 自动编译项目
- ✅ 端口冲突检测
- ✅ 实时状态监控
- ✅ 彩色日志输出
- ✅ 优雅的错误处理
- ✅ Ctrl+C 安全退出

**适用场景：**
- 首次使用
- 开发调试
- 需要查看详细日志
- 需要实时监控服务状态

**使用方法：**
```bash
./start_all_macos.sh
# 按 Ctrl+C 停止所有服务
```

### `quick_start.sh` - 快速启动

**特点：**
- ⚡ 启动速度快
- 🔇 后台静默运行
- 📦 自动编译（如需要）
- 🧹 自动清理端口
- ✅ 启动状态检查

**适用场景：**
- 日常快速使用
- 不需要查看日志
- 后台运行服务

**使用方法：**
```bash
./quick_start.sh
# 服务在后台运行，使用 ./stop_all_macos.sh 停止
```

### `stop_all_macos.sh` - 停止服务

**特点：**
- 🛑 停止所有相关进程
- 🧹 清理端口占用
- 🔍 智能进程识别
- ✅ 确认停止状态

**使用方法：**
```bash
./stop_all_macos.sh
```

## 🌐 访问地址

启动成功后，可通过以下地址访问：

- **Web界面**: http://localhost:8080
- **局域网访问**: http://[你的IP]:8080
- **C服务器**: 127.0.0.1:9000

## 🔧 故障排除

### 1. 启动失败
```bash
# 检查环境
./test_deployment_macos.sh

# 手动编译
make clean && make

# 检查端口占用
lsof -i :9000
lsof -i :8080
```

### 2. 权限问题
```bash
# 给脚本执行权限
chmod +x *.sh
chmod +x gui_examples/*.sh
```

### 3. 依赖问题
```bash
# 安装依赖
brew install sqlite3 openssl readline python3
pip3 install flask requests
```

### 4. 端口被占用
```bash
# 强制停止
./stop_all_macos.sh

# 或手动清理
lsof -ti:9000 | xargs kill -9
lsof -ti:8080 | xargs kill -9
```

## 💡 使用技巧

1. **首次使用建议**：先运行 `./test_deployment_macos.sh` 检查环境

2. **开发调试**：使用 `./start_all_macos.sh` 查看详细日志

3. **日常使用**：使用 `./quick_start.sh` 快速启动

4. **清理环境**：使用 `./stop_all_macos.sh` 停止所有服务

5. **查看进程**：
   ```bash
   # 查看网盘相关进程
   ps aux | grep -E "(server|python3 app.py)"
   
   # 查看端口占用
   lsof -i :9000
   lsof -i :8080
   ```

## 🎉 快速开始

```bash
# 1. 克隆或下载项目
# 2. 进入项目目录
cd linux-netdisk

# 3. 检查环境（首次使用）
./test_deployment_macos.sh

# 4. 快速启动
./quick_start.sh

# 5. 打开浏览器访问 http://localhost:8080

# 6. 使用完毕后停止
./stop_all_macos.sh
```
